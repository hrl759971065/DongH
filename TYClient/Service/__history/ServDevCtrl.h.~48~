//---------------------------------------------------------------------------

#ifndef ServDevCtrlH
#define ServDevCtrlH
#include "ServBase.h"
//---------------------------------------------------------------------------

class TServDevCtrl : public TServBase{
public:
	TServDevCtrl();
	~TServDevCtrl();

	bool OpenMeter();
	bool OpenReader(int Index);
	bool CloseReader(int Index);
	bool OpenLED(int Index);
	bool OpenIOCtrl(int Index);
	bool SendLed(int Index,String str);

	bool ReadCardID(int Index,TCardInfo &CardInfo);
	bool SendICCard(int Index,int SendType);
	bool DeviceStatus(int Index,unsigned char *outStatus);
	String DevStatusDecode(unsigned char *inStatus);

    double GetRealVal();
	bool GetStaticVal(double &fVal);
	bool IsLeave();

	long GetDWQSta();
	bool DWQCheckProc(int nHeadDZFlag,String Numplate);
	void OutCtrl(int nDev,int nPos,int nAction);
	void HLDCtrl(int nHead_cmd,int nTail_cmd);
protected:

private:
	String 	   _sendStr_Old[2];
};

#endif
